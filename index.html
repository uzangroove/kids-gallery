<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>××”×¦×™×•×¨ ×œ×“××™×•×Ÿ - ×¡×‘× ×©××¢×•×Ÿ</title>
    
    <!-- Supabase Client -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    
    <style>
        :root {
            --stitch-blue-bg: radial-gradient(circle at center, #e1f0ff 0%, #c9e4ff 100%);
            --stitch-purple: #6c5ce7;
            --stitch-pink: #e84393;
            --stitch-cyan: #00d2d3;
            --white: #ffffff;
            --shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Segoe UI', system-ui, sans-serif; }

        body, html {
            height: 100%;
            overflow: hidden;
            background: var(--stitch-blue-bg);
            color: #2d3436;
        }

        .cloud { position: fixed; opacity: 0.2; z-index: -1; font-size: 80px; pointer-events: none; }
        .c1 { top: 5%; left: 5%; } .c2 { top: 40%; right: 5%; }

        .screen {
            display: flex;
            flex-direction: column;
            height: 100vh;
            width: 100%;
            padding: 10px;
            text-align: center;
            position: relative;
        }

        .hidden { display: none !important; }

        /* ×›×•×ª×¨×•×ª */
        .header-area { flex: 0 0 auto; padding: 5px 0; }
        .main-title { font-size: 2.2rem; color: #4834d4; text-shadow: 2px 2px 0 #fff; margin-bottom: 5px; }
        .logo-detail-side { width: 70px; height: 70px; border-radius: 15px; background: white; padding: 5px; box-shadow: var(--shadow); }

        /* ××–×•×¨ ×ª×•×›×Ÿ ××¨×›×–×™ */
        .main-content {
            flex: 1 1 auto;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            gap: 15px;
            width: 100%;
        }

        /* Loading Spinner */
        .loading-spinner {
            width: 60px;
            height: 60px;
            border: 6px solid #f3f3f3;
            border-top: 6px solid var(--stitch-purple);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* ××“×™×” */
        .comparison-slider {
            position: relative;
            width: 100%;
            max-width: 800px;
            height: 42vh;
            border-radius: 30px;
            overflow: hidden;
            border: 8px solid white;
            box-shadow: var(--shadow);
            background: #eee;
        }
        .layer { position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover; }
        .before-wrap { position: absolute; top: 0; right: 0; height: 100%; width: 50%; overflow: hidden; z-index: 2; border-left: 4px solid white; }
        .before-wrap img { position: absolute; top: 0; right: 0; height: 100%; width: 800px; max-width: 80vw; object-fit: cover; }
        .slider-handle { position: absolute; top: 0; bottom: 0; width: 6px; background: white; z-index: 3; left: 50%; transform: translateX(-50%); cursor: ew-resize; }
        .slider-node { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 50px; height: 50px; background: var(--stitch-cyan); border: 5px solid white; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold; }

        video {
            height: 22vh;
            max-width: 100%;
            border-radius: 20px;
            border: 6px solid white;
            background: black;
            box-shadow: var(--shadow);
        }

        /* ×’×œ×¨×™×” */
        #grid-root {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(130px, 1fr));
            gap: 12px;
            overflow-y: auto;
            width: 100%;
            max-width: 1000px;
            padding: 10px;
        }
        .child-card { background: white; border-radius: 18px; padding: 8px; box-shadow: var(--shadow); cursor: pointer; border: 4px solid #fff; transition: transform 0.2s; }
        .child-card:hover { transform: scale(1.05); }
        .card-img { width: 100%; aspect-ratio: 1; border-radius: 12px; object-fit: cover; }

        /* ××–×•×¨ ×ª×—×ª×•×Ÿ ×§×‘×•×¢ */
        .fixed-footer {
            flex: 0 0 auto;
            padding: 10px 0;
            width: 100%;
        }

        .nav-btns { display: flex; justify-content: center; gap: 15px; margin-bottom: 10px; }
        .btn-nav { padding: 10px 25px; border-radius: 20px; border: none; font-weight: 800; cursor: pointer; color: white; font-size: 1rem; box-shadow: 0 4px 10px rgba(0,0,0,0.1); transition: all 0.3s; }
        .btn-nav:hover { transform: translateY(-2px); box-shadow: 0 6px 15px rgba(0,0,0,0.2); }
        .btn-p { background: var(--stitch-purple); }
        .btn-h { background: #e056fd; }

        .personal-branding {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
        }
        .logo-saba-target { width: 45px; height: 45px; object-fit: cover; border-radius: 50%; border: 2px solid white; display: none; }
        .slogan { font-size: 1.1rem; font-weight: 800; color: var(--stitch-purple); text-shadow: 1px 1px 1px #fff; }

        /* Toast Notifications */
        .toast {
            position: fixed;
            top: 20px;
            right: 20px;
            background: white;
            padding: 15px 20px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            z-index: 10000;
            display: flex;
            align-items: center;
            gap: 10px;
            animation: slideDown 0.3s ease-out;
        }

        @keyframes slideDown {
            from { transform: translateY(-100px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .toast.success { border-left: 4px solid #10B981; }
        .toast.error { border-left: 4px solid #EF4444; }
        .toast.info { border-left: 4px solid #0EA5E9; }

        @media (max-width: 600px) {
            .main-title { font-size: 1.6rem; }
            .comparison-slider { height: 35vh; }
        }
    </style>
</head>
<body>

    <div class="cloud c1">â˜ï¸</div>
    <div class="cloud c2">â˜ï¸</div>

    <!-- Splash Screen -->
    <section id="splash" class="screen">
        <div class="main-content">
            <img id="logo-splash" src="" style="width:160px; height:160px; border-radius:50%; background:white; display:none; border:5px solid #fff; box-shadow: var(--shadow); margin-bottom: 20px;">
            <h1 class="main-title">××”×¦×™×•×¨ ×œ×“××™×•×Ÿ â€“ ×’×Ÿ ×¢×¨×‘×”</h1>
            <button style="background: linear-gradient(135deg, #6c5ce7, #a29bfe); color: white; border: none; padding: 18px 50px; font-size: 1.6rem; border-radius: 100px; cursor: pointer; font-weight: bold; box-shadow: 0 8px 20px rgba(108, 92, 231, 0.3); transition: all 0.3s;" onclick="navTo('gallery')" onmouseover="this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(1)'">× ×›× ×¡×™× ×œ×™×¦×™×¨×•×ª ğŸ¨</button>
        </div>
        <div class="fixed-footer">
            <div class="personal-branding">
                <img src="" class="logo-saba-target">
                <div class="slogan">×¡×‘× ×©××¢×•×Ÿ - ×—×›××” ×©×œ ×¤×¢× ,××¦×—×™×§ ×•××œ× ×‘ AI</div>
            </div>
        </div>
    </section>

    <!-- Gallery Screen -->
    <section id="gallery" class="screen hidden">
        <div class="header-area">
            <h2 style="font-size: 1.8rem; color: #0984e3;">×’×œ×¨×™×™×ª ×”××× ×™× ×”×¦×¢×™×¨×™×</h2>
        </div>
        <div class="main-content">
            <div id="grid-root"></div>
        </div>
        <div class="fixed-footer">
            <div class="nav-btns">
                <button class="btn-nav" style="background:#555;" onclick="navTo('splash')">ğŸ  ×—×–×¨×” ×œ×‘×™×ª</button>
            </div>
            <div class="personal-branding">
                <img src="" class="logo-saba-target">
                <div class="slogan">×¡×‘× ×©××¢×•×Ÿ - ×—×›××” ×©×œ ×¤×¢× ,××¦×—×™×§ ×•××œ× ×‘ AI</div>
            </div>
        </div>
    </section>

    <!-- Detail Screen -->
    <section id="detail" class="screen hidden">
        <div class="header-area">
            <div style="display: flex; align-items: center; justify-content: center; gap: 12px;">
                <img id="logo-detail" src="" class="logo-detail-side">
                <h2 id="kid-title" style="font-size: 2rem; color: var(--stitch-purple);"></h2>
            </div>
        </div>
        <div class="main-content">
            <div class="comparison-slider" id="slider-root">
                <img id="view-after" class="layer" src="">
                <div class="before-wrap" id="view-before-wrap"><img id="view-before" src=""></div>
                <div class="slider-handle" id="slider-handle"><div class="slider-node">â†”</div></div>
            </div>
            <video id="view-video" controls></video>
        </div>
        <div class="fixed-footer">
            <div class="nav-btns">
                <button class="btn-nav btn-p" onclick="move(-1)">â† ×”×§×•×“×</button>
                <button class="btn-nav btn-h" onclick="navTo('gallery')">ğŸ–¼ï¸ ×’×œ×¨×™×”</button>
                <button class="btn-nav btn-p" onclick="move(1)">×”×‘× â†’</button>
                <button class="btn-nav" style="background: #10B981;" onclick="shareKid()" id="share-btn">ğŸ”— ×©×ª×£</button>
            </div>
            <div class="personal-branding">
                <img src="" class="logo-saba-target">
                <div class="slogan">×¡×‘× ×©××¢×•×Ÿ - ×—×›××” ×©×œ ×¤×¢× ,××¦×—×™×§ ×•××œ× ×‘ AI</div>
            </div>
        </div>
    </section>

    <script src="app.js"></script>
</body>
</html>
